<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="/build/tailwind.css">
  <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
</head>

<body>
  <div class="relative h-4/5">
    <div id="openseadragon1" class="absolute inset-0"></div>
    <div class="relative h-full flex justify-center items-center text-yellow-400 uppercase">
      <h1 class="text-8xl text-center leading-loose">
        <span x-data="scrambled('Akcia')" x-text="scrambledText"></span>
        <br />
        <span x-data="scrambled('Zet')" x-text="scrambledText"></span>
      </h1>
      <h3 class="absolute tracking-widest mt-3 text-3xl mx-auto my-auto">Umenovedná výprava</h3>
    </div>
  </div>


  <script>
    const SCRAMBLE_PROBABILITY = 1 / 2

    function scrambled(initialText) {
      let scrambledText = ''

      for (let letterIndex = 0; letterIndex < initialText.length; letterIndex++) {
        const shouldScramble = Math.random() <= SCRAMBLE_PROBABILITY
        scrambledText += shouldScramble ? '*' : initialText[letterIndex]
      }

      return {
        scrambledText: scrambledText,
      }
    }
  </script>

  <!-- Loading background image -->
  <script src="https://cdn.jsdelivr.net/npm/openseadragon@2.4/build/openseadragon/openseadragon.min.js"></script>
  <script type="text/javascript">
    const tileSource = new OpenSeadragon.DziTileSource(
      11242, 7793, 256, 0,
      'https://img.webumenia.sk/zoom/?path=%2FSNGARTPETRUS%2FX3900%2FSNG--O_3844--1_1--2010_03_11--L2_WEB.jp2_files/',
      'jpg',
    )

    const destinations = [
      new OpenSeadragon.Point(.5, .37),
      new OpenSeadragon.Point(.43, .33),
      new OpenSeadragon.Point(.357, .194),
    ]

    var viewer = OpenSeadragon({
      id: "openseadragon1",
      showNavigationControl: false,
      mouseNavEnabled: false,
      defaultZoomLevel: 14,
      minPixelRatio: 1,
      tileSources: tileSource,
      immediateRender: true,
    })

    viewer.addHandler('open', function () {
      const randomDestination = destinations[Math.floor(Math.random() * destinations.length)]
      viewer.viewport.panTo(randomDestination, true);
    })
  </script>
</body>

</html>
